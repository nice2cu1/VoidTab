@import url('https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&family=JetBrains+Mono:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------------------------------------------------- */
/* Variables - 核心变量定义（不透明版本）                                       */
/* -------------------------------------------------------------------------- */
:root {
    /* ================= Dark Mode (default) ================= */
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.72);
    --text-tertiary: rgba(255, 255, 255, 0.46);

    --accent-color: #0A84FF;
    --accent-color-rgb: 10, 132, 255;

    --page-fallback: #121214;
    --default-wallpaper: radial-gradient(circle at 15% 50%, rgba(40, 45, 60, 0.45), transparent 40%),
    radial-gradient(circle at 85% 30%, rgba(30, 35, 50, 0.42), transparent 40%),
    linear-gradient(180deg, #161618 0%, #0c0c0e 100%);

    --ease-spring: cubic-bezier(0.16, 1, 0.3, 1);

    /* ⚠️ Glass: 只给“玻璃效果专用 class”用，别让主面板 widget 默认用它 */
    --glass-surface: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.12);
    --glass-shadow: 0 10px 30px -12px rgba(0, 0, 0, 0.55);
    --glass-blur: 40px;
    --glass-saturate: 160%;

    /* Overlay：用 rgb + alpha，避免 light 仍然是黑雾 */
    --overlay-rgb: 0, 0, 0;
    --overlay-alpha: 0.55;

    /* Inputs */
    --slider-track: rgba(255, 255, 255, 0.2);
    --slider-thumb: #ffffff;

    /* Settings / Modal（不透明） */
    --settings-surface: #121214;
    --settings-panel: #17171a;
    --settings-border: rgba(255, 255, 255, 0.10);
    --settings-border-soft: rgba(255, 255, 255, 0.08);
    --settings-text: #ffffff;
    --settings-text-secondary: rgba(255, 255, 255, 0.70);
    --settings-input-bg: #1d1d22;

    --settings-shadow: 0 22px 60px rgba(0, 0, 0, 0.55);
    --settings-shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.30);

    /* ✅ Widgets（主面板卡片：不透明） */
    --widget-surface: #151518;
    --widget-surface-2: #1b1b1f;
    --widget-border: rgba(255, 255, 255, 0.10);
    --widget-text: rgba(255, 255, 255, 0.92);
    --widget-muted: rgba(255, 255, 255, 0.60);
    --widget-shadow: 0 14px 34px rgba(0, 0, 0, 0.35);
}

html.light {
    --text-primary: #111827;
    --text-secondary: rgba(17, 24, 39, 0.72);
    --text-tertiary: rgba(17, 24, 39, 0.46);

    --accent-color: #007AFF;
    --accent-color-rgb: 0, 122, 255;

    --page-fallback: #eef2f6;
    --default-wallpaper: radial-gradient(at 0% 0%, rgba(216, 235, 255, 0.75) 0px, transparent 52%),
    radial-gradient(at 100% 0%, rgba(240, 220, 255, 0.65) 0px, transparent 52%),
    radial-gradient(at 50% 100%, rgba(240, 248, 255, 0.75) 0px, transparent 55%),
    linear-gradient(180deg, #eef2f6 0%, #e9edf3 100%);

    /* ✅ Light overlay 应该是白雾而不是黑雾 */
    --overlay-rgb: 255, 255, 255;
    --overlay-alpha: 0.55;

    --slider-track: rgba(0, 0, 0, 0.1);
    --slider-thumb: #ffffff;

    /* Settings / Modal（不透明） */
    --settings-surface: #f3f4f6;
    --settings-panel: #ffffff;
    --settings-border: rgba(0, 0, 0, 0.08);
    --settings-border-soft: rgba(0, 0, 0, 0.06);
    --settings-text: #111827;
    --settings-text-secondary: rgba(17, 24, 39, 0.68);
    --settings-input-bg: #f1f5f9;

    --settings-shadow: 0 22px 60px rgba(0, 0, 0, 0.14);
    --settings-shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.10);

    /* ✅ Widgets（主面板卡片：不透明，浅灰/浅白） */
    --widget-surface: #f3f4f6; /* 浅灰 */
    --widget-surface-2: #ffffff; /* 浅白 */
    --widget-border: rgba(0, 0, 0, 0.08);
    --widget-text: rgba(15, 23, 42, 0.92);
    --widget-muted: rgba(15, 23, 42, 0.55);
    --widget-shadow: 0 14px 28px rgba(0, 0, 0, 0.10);
}

/* -------------------------------------------------------------------------- */
/* Global */
/* -------------------------------------------------------------------------- */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    color: var(--text-primary);
    background-color: var(--page-fallback);
    background-image: var(--default-wallpaper);
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.5s ease, color 0.3s ease;
    min-height: 100vh;
}

/* -------------------------------------------------------------------------- */
/* ✅ 关键：主面板 widget 统一用“不透明卡片”                                     */
/* -------------------------------------------------------------------------- */
.widget-card {
    background: var(--widget-surface); /* ✅ 不要 mix transparent */
    border: 1px solid var(--widget-border);
    box-shadow: var(--widget-shadow);
    color: var(--widget-text);
    transition: transform .18s ease, border-color .18s ease, background .18s ease;
}

.widget-card:hover {
    background: var(--widget-surface-2);
    transform: translateY(-1px);
    border-color: rgba(var(--accent-color-rgb), 0.20);
}

/* 如果你有很多组件以前用了 apple-glass —— 这里给它“默认改为不雾” */
.apple-glass {
    background: var(--widget-surface);
    border: 1px solid var(--widget-border);
    box-shadow: var(--widget-shadow);
    transition: all 0.3s var(--ease-spring);
}

/* 需要玻璃效果时，改用这个新 class：apple-glass-blur */
.apple-glass-blur {
    background-color: var(--glass-surface);
    backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
}

/* -------------------------------------------------------------------------- */
/* Unified Modal / Settings Classes（弹窗用，不影响主面板）                      */
/* -------------------------------------------------------------------------- */
.settings-mask {
    background: rgba(var(--overlay-rgb), var(--overlay-alpha));
    backdrop-filter: blur(16px) saturate(140%);
    -webkit-backdrop-filter: blur(16px) saturate(140%);
}

.settings-shell {
    background: var(--settings-surface);
    border: 1px solid var(--settings-border);
    box-shadow: var(--settings-shadow);
}

.settings-header {
    background: var(--settings-surface);
    border-bottom: 1px solid var(--settings-border-soft);
}

.settings-body {
    background: var(--settings-surface);
}

.settings-text {
    color: var(--settings-text);
}

.settings-muted {
    color: var(--settings-text-secondary);
}

.settings-accent {
    color: var(--accent-color);
}

.settings-logo {
    background: rgba(var(--accent-color-rgb), 0.12);
    border: 1px solid rgba(var(--accent-color-rgb), 0.20);
    color: var(--accent-color);
}

.settings-btn {
    background: var(--settings-panel);
    border: 1px solid var(--settings-border-soft);
    color: var(--settings-text);
    transition: all .18s ease;
}

.settings-btn:hover {
    transform: translateY(-1px);
    border-color: rgba(var(--accent-color-rgb), 0.22);
}

.settings-close {
    background: var(--settings-panel);
    border: 1px solid var(--settings-border-soft);
    color: rgba(var(--accent-color-rgb), 0.85);
    transition: all .18s ease;
}

.settings-close:hover {
    border-color: rgba(var(--accent-color-rgb), 0.22);
    color: var(--settings-text);
}

.settings-select {
    appearance: none;
    -webkit-appearance: none;
    border-radius: 14px;
    padding: 10px 14px;
    font-size: 13px;
    font-weight: 700;
    background: var(--settings-input-bg); /* ✅ 不透明 */
    border: 1px solid var(--settings-border-soft);
    color: var(--settings-text);
    outline: none;
    cursor: pointer;
    transition: box-shadow .18s ease, border-color .18s ease, background .18s ease;
}

.settings-select:focus {
    border-color: rgba(var(--accent-color-rgb), 0.40);
    box-shadow: 0 0 0 4px rgba(var(--accent-color-rgb), 0.16);
}

.settings-select option {
    background: var(--settings-panel);
    color: var(--settings-text);
}

.settings-loading {
    background: rgba(var(--overlay-rgb), 0.35);
    backdrop-filter: blur(10px) saturate(130%);
    -webkit-backdrop-filter: blur(10px) saturate(130%);
}

/* -------------------------------------------------------------------------- */
/* Scrollbars */
/* -------------------------------------------------------------------------- */
.custom-scroll::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

.custom-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.custom-scroll::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.22);
    border-radius: 999px;
    transition: background 0.2s;
}

.custom-scroll:hover::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.36);
}
